{% load markdown_extras %}<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .email-container {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header {
            border-bottom: 3px solid #E60033;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .header h2 {
            margin: 0;
            color: #E60033;
            font-size: 20px;
        }
        .template-box {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-left: 4px solid #E60033;
            padding: 20px;
            margin: 25px 0;
            border-radius: 4px;
        }
        .template-separator {
            border-top: 2px dashed #dee2e6;
            margin: 15px 0;
            padding-top: 15px;
        }
        .cta-button {
            display: inline-block;
            background-color: #E60033;
            color: #ffffff;
            padding: 14px 35px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 600;
            margin: 25px 0;
        }
        .cta-button:hover {
            background-color: #CC002E;
        }
        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            font-size: 11px;
            color: #6c757d;
            text-align: center;
        }
        .signature {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="email-container">
        <div class="header">
            <h2>Thesis Progress Update</h2>
        </div>

        <p>Dear {% for student in thesis.students.all %}{{ student.first_name }}{% if not forloop.last %}{% if forloop.revcounter == 2 %} and {% else %}, {% endif %}{% endif %}{% endfor %},</p>

        <p>Please take a few minutes to enter your progress using our template below. Following these templates does not only help us get a more organized overview of all our students, allowing us to better respond to your needs, but they are also designed to help you reflect on your progress. Your entries will be automatically logged in our system and forwarded to us. We recommend that you also keep your own log of these entries.</p>

        <p>The template looks as follows. You can freely edit it and replace or remove questions if you don't find them relevant (unless we explicitly asked you not to). <strong>Don't overthink itâ€”just be honest. This will not be graded.</strong></p>

        <div class="template-box">
            <div class="template-separator">
                {{ request_message|markdown|safe }}
            </div>
        </div>

        <p>Click the link below to enter your response. You can also use this link to edit your entry later if needed. We will be automatically notified when you submit or update your response.</p>

        <div style="text-align: center;">
            <a href="{{ feedback_url }}" class="cta-button">Enter Your Response</a>
        </div>

        <div class="signature">
            <p>
                <strong>Best regards,</strong><br>
                {{ requested_by.get_full_name|default:requested_by.username }}
                {% if requested_by.email %}<br>
                <a href="mailto:{{ requested_by.email }}" style="color: #E60033; text-decoration: none;">{{ requested_by.email }}</a>
                {% endif %}
            </p>
        </div>

        <div class="footer">
            <p>The Thesis Manager is open source software for tracking student theses from first contact to grading.</p>
        </div>
    </div>
</body>
</html>
